(self.webpackChunkreact17_webpack5_cli=self.webpackChunkreact17_webpack5_cli||[]).push([[429],{4802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var n=r(7294),a=r(6919),i=r(2633),c=r(5776),l=r(8207),o=r(1884),d=r(7835),p=r(4586);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=e=>{var{elementType:t,cardList:r,changeCardList:a,children:i,accept:c,containerType:o}=e,[s,g]=(0,l.i)(),m={type:c||"card",elementType:t,containerType:o||"normal",update:g},[,y]=(0,d.useDrag)({item:m,begin:e=>(r.find((e=>-1===e.id))||a([{bg:"aqua",category:"\u653e\u8fd9\u91cc",id:-1},...r]),m),end(e,t){var n=t.getDropResult(),i=r.findIndex((e=>-1===e.id)),c=[...r];if(n.update)return c.splice(i,1),n.update({children:[u(u({},t.getItem()),{},{id:(0,p.Z)()})]}),void a(c);t.didDrop()?c.splice(i,1,u(u({},t.getItem()),{},{id:(0,p.Z)()})):c.splice(i,1),a(c)}});return n.createElement("div",{ref:y,style:{display:"inline-block",margin:20,padding:"16px 30px",width:100,cursor:"move"}},i)};const y=e=>{var{bg:t,handleSelect:r,index:a,moveCard:i,id:c,children:o,containerType:p,type:s}=e,u=(0,n.useRef)(null),[g,m]=(0,l.i)(),y=(0,n.useRef)(g);y.current=g;var[{isDragging:f},b,h]=(0,d.useDrag)({collect:e=>({isDragging:e.isDragging()}),item:{type:s||"card",index:a,update:m,state:y}}),[,v]=(0,d.useDrop)({accept:["card","item"],hover(e,t){if(u.current){var r=e.index,n=a,c=u.current.getBoundingClientRect(),l=(c.bottom-c.top)/2,o=t.getClientOffset(),d=o.y-c.top,s=o.y-c.bottom+20;r!==n&&("free"===p&&s<0&&d>0||r<n&&d<l||r>n&&d>l||(i(r,n),void 0!==e.index&&(e.index=n)))}}}),O=(0,n.useMemo)((()=>({position:"relative",background:t,opacity:-1===c?.4:f?.2:1,verticalAlign:40})),[t,c,f]);return h(v(u)),b(u),n.createElement("div",{ref:u,style:O,onClick:r},o)};var f={backgroundColor:"white",border:"1px dashed gray",margin:"100px auto",minHeight:"300px",textAlign:"center",overflowY:"scroll",width:300},b=(0,n.createContext)((e=>{}));const h=e=>{var{cardList:t,changeCardList:r,handleSelect:a}=e,[,i]=(0,d.useDrop)({accept:["card","item"]}),c=(0,n.useCallback)(((e,n)=>{var a=[...t];if(void 0===e){var i=t.findIndex((e=>-1===e.id));a.splice(i,1),a.splice(n,0,{bg:"aqua",category:"\u653e\u8fd9\u91cc",id:-1}),r(a)}else{var c=t[e];a.splice(e,1),a.splice(n,0,c),r(a)}}),[t]);return n.createElement(b.Provider,{value:a},n.createElement("div",{style:f,ref:i},t.length<=0?n.createElement("div",{style:{lineHeight:"60px"}},"\u653e\u5165\u7ec4\u4ef6"):t.map(((e,t)=>n.createElement(y,{index:t,type:e.type,containerType:e.containerType,key:e.id,handleSelect:()=>{a({id:e.id,editFields:e.elementType.editFields})},moveCard:c},e.elementType&&((e,t)=>n.createElement(l.Z,{id:e,defaultProps:t.defaultProps,enable:t.enable},n.createElement(t,null)))(e.id,e.elementType))))))},v="carousel--3b9GF";var O=r(706),w=e=>{var[t]=(0,l.i)(),[r,a]=(0,n.useState)("auto");return n.createElement(O.Z,{className:v,autoplay:!0},t.banners.map((e=>n.createElement("img",{key:e.src,src:e.src,onLoad:e=>{var{height:t}=e.target;t>r&&a(t)},alt:""}))))};w.defaultProps={banners:[{src:"http://19446153.s61i.faiusr.com/2/AD0IifOiCRACGAAg6_zU5gUowsiZ_AQw7gU46AI!900x900.jpg.webp"},{src:"http://19446153.s61i.faiusr.com/2/AD0IifOiCRACGAAg6_zU5gUoqJOuhwEw7gU46AI!900x900.jpg.webp"}]},w.editFields=["banner"];const E=w,x="test--HKDap";var C=r(1577),P=r(3064);const k="content--1yOKC";function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={backgroundColor:"white",padding:"0 10px",textAlign:"center",width:"100%",height:"100%",position:"relative"},A=e=>{var t=(0,n.useContext)(b),r=(0,n.useRef)(null),[a,i]=(0,l.i)(),[c,o]=(0,n.useState)(!1),[,p]=(0,d.useDrop)({accept:"item",hover:(e,t)=>{},drop:(e,t)=>{r.current.getBoundingClientRect();if(e.update){var n=t.getDifferenceFromInitialOffset(),a=(e.state.current.left||0)+n.x,c=(e.state.current.top||0)+n.y;e.update({left:a,top:c,position:"absolute"})}return{update:i}}}),s=(0,n.useCallback)(((e,t)=>{}),[]);return p(r),n.createElement("div",{className:k,style:D(D({},L),{},{background:c?"gray":""}),ref:r},a.children?a.children.map(((e,r)=>n.createElement(l.Z,{id:e.id,defaultProps:e.elementType.defaultProps,needResize:!0,noBorder:!0},n.createElement(y,{index:r,type:e.type,containerType:e.containerType,key:e.id,handleSelect:r=>{r.preventDefault(),setTimeout((()=>{t({id:e.id,editFields:e.elementType.editFields})}),10)},moveCard:s},n.createElement(e.elementType,null))))):"")};A.enable={bottom:!0},A.defaultProps={width:"100%"};const I=A,S="text--2FxhQ";function F(e){(e=e||window.event).preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain")||"";document.execCommand("insertText",!1,t)}var _=e=>{var[{content:t},r]=(0,l.i)();return n.createElement("div",{className:S,contentEditable:!0,onPaste:F,onInput:function(e){var t=e.target.innerHTML;r({content:t})},dangerouslySetInnerHTML:{__html:t}})};_.defaultProps={color:"black",content:""};const R=_;function Z(){var[{background:e="black"},t]=(0,l.i)();return n.createElement("div",{className:x,style:{background:e}},"\u989c\u8272\u53ef\u7f16\u8f91\uff1a",n.createElement("input",{type:"text",onBlur:e=>t({background:e.target.value})}))}function U(){var[{width:e,height:t,text:r="\u6309\u94ae",link:a="#"}]=(0,l.i)();return n.createElement(C.Z,{style:{width:e,height:t},type:"primary"},r)}Z.editFields=["width","height","background"],U.editFields=["width","height","text","link"],U.defaultProps={width:64,height:32};var B={list:[]};const H=e=>{var[t,r]=(0,n.useState)({id:"",editFields:[]}),[l,d]=(0,c.I)("page",B),p=(0,a.I0)(),s=(0,i.L)((e=>e[d])).list,u=(0,n.useCallback)((e=>{p({type:"update_list",page:d,data:e})}),[p,d]);return n.createElement(l,null,n.createElement(m,{elementType:Z,cardList:s,changeCardList:u},"\u70b9\u6211\u53ef\u4ee5\u62d6\u4e2abox~"),n.createElement(m,{accept:"item",elementType:U,cardList:s,changeCardList:u},"\u70b9\u6211\u53ef\u4ee5\u62d6\u4e2aButton"),n.createElement(m,{containerType:"free",elementType:I,cardList:s,changeCardList:u},"\u70b9\u6211\u53ef\u4ee5\u62d6\u4e2aFreeContainer"),n.createElement(m,{elementType:E,cardList:s,changeCardList:u},"\u70b9\u6211\u53ef\u4ee5\u62d6\u4e2aCarouselCom"),n.createElement(m,{accept:"item",elementType:R,cardList:s,changeCardList:u},"\u70b9\u6211\u53ef\u4ee5\u62d6\u4e2aText"),n.createElement(h,{cardList:s,changeCardList:u,handleSelect:r}),n.createElement(o.dP,t),n.createElement(P.Z,{accept:"image/*",action:"/api/upload"},n.createElement(C.Z,{type:"primary"},"\u4e0a\u4f20")))}}}]);